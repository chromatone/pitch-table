import{o as e,c as t,a,u as s,b as o,d as l,p as n,e as c,t as r,r as p,f as i,g as v,P as d,M as u,h,w as m,i as f,j as g,k as w,v as x,l as b,s as k,F as y,m as M,n as z,G as _}from"./vendor.63fa0c4e.js";!function(e=".",t="__import__"){try{self[t]=new Function("u","return import(u)")}catch(a){const s=new URL(e,location),o=e=>{URL.revokeObjectURL(e.src),e.remove()};self[t]=e=>new Promise(((a,l)=>{const n=new URL(e,s);if(self[t].moduleMap[n])return a(self[t].moduleMap[n]);const c=new Blob([`import * as m from '${n}';`,`${t}.moduleMap['${n}']=m;`],{type:"text/javascript"}),r=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(c),onerror(){l(new Error(`Failed to import: ${e}`)),o(r)},onload(){a(self[t].moduleMap[n]),o(r)}});document.head.appendChild(r)})),self[t].moduleMap={}}}("/assets/");const C={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 32 32"},R=a("path",{d:"M15 3v5h2V3zM7.5 6.094L6.094 7.5l3.531 3.563l1.438-1.438zm17 0l-3.563 3.531l1.438 1.438L25.906 7.5zM16 9c-3.855 0-7 3.145-7 7s3.145 7 7 7s7-3.145 7-7s-3.145-7-7-7zm0 2c2.773 0 5 2.227 5 5s-2.227 5-5 5s-5-2.227-5-5s2.227-5 5-5zM3 15v2h5v-2zm21 0v2h5v-2zM9.625 20.938L6.094 24.5L7.5 25.906l3.563-3.531zm12.75 0l-1.438 1.437l3.563 3.531l1.406-1.406zM15 24v5h2v-5z",fill:"currentColor"},null,-1);var L={render:function(a,s){return e(),t("svg",C,[R])}};const F={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 32 32"},j=a("path",{d:"M5 5v2H3v2h2v2h2V9h2V7H7V5zm15.281 2.938L18.625 8C13.281 8.191 9 12.578 9 17.969c0 5.511 4.488 10 10 10c5.39 0 9.777-4.282 9.969-9.625l.062-1.625l-1.468.687A5.94 5.94 0 0 1 25 17.97c-3.324 0-6-2.676-6-6c0-.914.223-1.75.594-2.531zm-2.906 2.375c-.125.554-.375 1.062-.375 1.656c0 4.406 3.594 8 8 8c.605 0 1.121-.246 1.688-.375c-.762 3.625-3.829 6.375-7.688 6.375c-4.43 0-8-3.57-8-8c0-3.852 2.758-6.887 6.375-7.657z",fill:"currentColor"},null,-1);var q={render:function(a,s){return e(),t("svg",F,[j])}};const B={expose:[],setup(a){const n=s(),c=o(n);return(a,s)=>{const o=L,r=q;return e(),t("div",{class:"icon",onClick:s[1]||(s[1]=e=>l(c)())},[l(n)?(e(),t(r,{key:1,class:"mx-2"})):(e(),t(o,{key:0,class:"ml-2"}))])}},__scopeId:"data-v-4f527a40"};n("data-v-5a51dcbe");const I={class:"p-4 flex"},A=a("a",{class:"text-xl",href:"https://chromatone.center",target:"_blank"},"Chromatone",-1),N=a("div",{class:"flex-auto"},null,-1),U=a("a",{href:"https://table.chromatone.center/v2/"},"old version",-1);c();const O={expose:[],setup:s=>(s,o)=>{const l=B;return e(),t("div",I,[A,a(l),N,U])},__scopeId:"data-v-5a51dcbe"};n("data-v-521ef93a");const E={class:"button"},P={class:"uppercase mr-1"};c();const V={expose:[],props:{label:String,state:Boolean},setup:s=>(o,l)=>(e(),t("div",E,[a("div",{class:"indicator mr-2",style:{color:s.state?"#fff":"#333"}},"●",4),a("div",P,r(s.label),1)])),__scopeId:"data-v-521ef93a"},$=p({show:{letters:!0,bpm:!1,hz:!1},rootFreq:440,tuning:"equal",octave:{range:[1,4],limit:[-6,9],list:i((()=>{let e=[];for(let t=$.octave.range[1];t>=$.octave.range[0];t--)e.push(t);return e}))}});n("data-v-560dcd01");const D={class:"flex p-4"};c();const G={expose:[],setup:s=>(s,o)=>{const n=V;return e(),t("div",D,[a(n,{label:"letters",state:l($).show.letters,onClick:o[1]||(o[1]=e=>l($).show.letters=!l($).show.letters)},null,8,["state"]),a(n,{label:"FREQ",state:l($).show.hz,onClick:o[2]||(o[2]=e=>l($).show.hz=!l($).show.hz)},null,8,["state"]),a(n,{label:"BPM",state:l($).show.bpm,onClick:o[3]||(o[3]=e=>l($).show.bpm=!l($).show.bpm)},null,8,["state"])])},__scopeId:"data-v-560dcd01"};n("data-v-d609cf5a");const S={class:"flex text-2xl text-center cursor-pointer"};c();const T={expose:[],props:{top:Boolean},setup:s=>(o,l)=>(e(),t("div",S,[a("div",{class:"btn bg-gray-300 dark:bg-gray-900",onClick:l[1]||(l[1]=e=>function(e){let t=e?1:0,a=e?0:1;e&&$.octave.range[t]<=$.octave.range[a]||!e&&$.octave.range[t]<=$.octave.limit[t]||$.octave.range[t]--}(s.top))},"–"),a("div",{class:"btn bg-gray-50 dark:bg-gray-500",onClick:l[2]||(l[2]=e=>function(e){let t=e?1:0,a=e?0:1;e&&$.octave.range[t]>=$.octave.limit[t]||!e&&$.octave.range[t]>=$.octave.range[a]||$.octave.range[t]++}(s.top))},"+")])),__scopeId:"data-v-d609cf5a"};n("data-v-3fb65ccd");const Y={key:0,class:"flex flex-col text-xs p-1"},H={key:0,class:"text-xl font-bold"},Q={key:1,class:"flex"},W={key:2,class:"flex"};c();const J={expose:[],props:{name:{type:String,default:"A"},hz:{type:Number,default:440},octave:{default:3,type:Number}},setup(a){const s=a,o=i((()=>60*s.hz));function n(e){let t;return t=e>1e6?(e/1e6).toFixed(2)+" M":e>1e3?(e/1e3).toFixed(2)+" k":e.toFixed(2)+" ",t}return(s,c)=>l($).show.hz||l($).show.bpm||l($).show.letters?(e(),t("div",Y,[l($).show.letters?(e(),t("div",H,r(a.name)+r(a.octave),1)):v("",!0),l($).show.hz?(e(),t("div",Q,r(n(a.hz))+"hz",1)):v("",!0),l($).show.bpm?(e(),t("div",W,r(n(l(o)))+"BPM",1)):v("",!0)])):v("",!0)}};function K(e,t){const a=new d(0,-1/0).toDestination(),s=new u({oscillator:{type:"sawtooth"},envelope:{attack:.05}}).connect(a),o=p({vol:0,pan:50,started:!1,active:i((()=>o.vol>0)),freq:i((()=>{let a=function(e=0,t=3,a=440,s="equal"){let o=0;const l=[0,112,204,316,386,498,590,702,814,884,1017,1088];if("equal"==s&&(o=Number(a*Math.pow(2,t-4+e/12))),"just"==s){let s=Number(Math.pow(Math.pow(2,1/1200),l[e]));o=Number(a*Math.pow(2,t-4)*s)}return o}(e,t);return s.oscillator.frequency.value=a,a}))});return h((()=>{s.triggerRelease()})),m((()=>o.vol),(e=>{a.volume.targetRampTo(f(.4*e/100))})),m((()=>o.pan),(e=>{let t=(e-50)/100*2;a.pan.targetRampTo(t)})),m((()=>o.active),(e=>{e?(console.log(e),s.triggerAttack(o.freq)):s.triggerRelease()})),o}J.__scopeId="data-v-3fb65ccd";n("data-v-13917aff");const X={class:"absolute w-full h-full top-0 left-0 bottom-0"},Z={class:"absolute h-full top-0 left-0 right-0 text-center"};c();const ee={expose:[],props:{note:Object,octave:{default:3,type:Number}},setup(s){const o=s,n=K(o.note.pitch,o.octave),c=p({filterTaps:!0,preventWindowScrollY:!0,delay:0,eventOptions:{passive:!1}}),r=e=>{"suspended"==b.state&&k();let{movement:[t,a],dragging:s,tap:o}=e;o?n.active?(n.vol=0,n.pan=50):n.vol=50:(n.vol+=-a/20,n.vol>100&&(n.vol=100),n.vol<0&&(n.vol=0),n.pan+=t/20,n.pan>100&&(n.pan=100),n.pan<0&&(n.pan=0))},v=i((()=>"hsla("+30*o.note.pitch+","+(n.active?"100":"25")+"%,"+8*Math.abs(o.octave+2)+"%)")),d=i((()=>8*Math.abs(o.octave+2)>40?"hsla(0,0%,0%,"+(n.active?"1":"0.8")+")":"hsla(0,0%,100%,"+(n.active?"1":"0.8")+")"));return(o,p)=>{const i=J,u=g("drag");return w((e(),t("div",{class:["cell",{active:l(n).active}],"drag-options":l(c),style:{backgroundColor:l(v),color:l(d)}},[w(a("div",X,[a("div",{class:"volume",style:{height:l(n).vol+"%"}},null,4)],512),[[x,l(n).vol>0]]),w(a("div",Z,[a("div",{class:"pan absolute bg-gray-100 h-full m-auto",style:{left:l(n).pan+"%"}},null,4)],512),[[x,50!=l(n).pan]]),a(i,{name:s.note.name,hz:l(n).freq,octave:s.octave},null,8,["name","hz","octave"])],14,["drag-options"])),[[u,r]])}},__scopeId:"data-v-13917aff"},te=[{name:"A",pitch:0},{name:"A#",pitch:1},{name:"B",pitch:2},{name:"C",pitch:3},{name:"C#",pitch:4},{name:"D",pitch:5},{name:"D#",pitch:6},{name:"E",pitch:7},{name:"F",pitch:8},{name:"F#",pitch:9},{name:"G",pitch:10},{name:"G#",pitch:11}];n("data-v-7d5823bb");const ae={class:"flex flex-col"};c();const se={expose:[],setup:s=>(s,o)=>{const n=T,c=ee;return e(),t("div",ae,[a(n,{top:!0}),(e(!0),t(y,null,M(l($).octave.list,(a=>(e(),t("div",{class:"flex",key:a},[(e(!0),t(y,null,M(l(te),(s=>(e(),t(c,{key:s.name,note:s,octave:a},null,8,["note","octave"])))),128))])))),128)),a(n)])},__scopeId:"data-v-7d5823bb"};const oe={class:"flex"},le={class:"flex flex-col w-full flex-auto"},ne=a("div",{class:"scroll-bar"},null,-1);const ce=z({expose:[],setup:s=>(s,o)=>{const l=O,n=G,c=se;return e(),t("div",oe,[a("div",le,[a(l),a(n),a(c)]),ne])}});ce.use(_),ce.mount("#app");
